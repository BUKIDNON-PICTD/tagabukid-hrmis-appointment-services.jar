import com.rameses.annotations.*;
import com.rameses.common.*;
import com.rameses.services.extended.*;


class TagabukidHRMISLeaveCaptureService
{
	
	@ActiveDB(value='hrmis_leave', em='tagabukid_hrmis')
	def em;

	@Env
	def env;

	@Service('DateService')
	def dtSvc 

	@Service("SequenceService")
	def seqSvc;

	@Service("PersistenceService")
    def persistenceSvc;

	// @ActiveDB(value='pmissuccessindicators', em='tagabukid_subay')
	// def emorg;

	// void beforeList(params){
	// 	if (params == null) params = [:]
	// 	params.searchtext = (params.searchtext ? params.searchtext :'')+'%'
	// }

	// @ProxyMethod
	// public def getList( params ) {
	// 	beforeList(params)
	// 	return em.getList(params)
	// } 

	@ProxyMethod
	def initCreate(){
		
		def entity = [:];
		entity.objid = 'LE' + new java.rmi.server.UID()
		entity.state = "DRAFT"
		entity.recordlog = [:]
		entity.recordlog.datecreated = dtSvc.serverDate
        entity.recordlog.createdbyuserid = env.USERID
        entity.recordlog.createdbyuser = env.FULLNAME
        entity.recordlog.dateupdated =  dtSvc.serverDate
        entity.recordlog.lastupdatedbyuserid = env.USERID
        entity.recordlog.lastupdatedbyuser = env.FULLNAME
        
     	entity.leavedetails = []
        return entity;

	}

}
